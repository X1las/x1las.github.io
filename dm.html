<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soundboard</title>
    <link rel="stylesheet" href="shared.css">
    <script src="shared.js"></script>
    <style>
    </style>
    <script>
        function toggleSound(soundId, button) {
            var sound = document.getElementById(soundId);
            if (sound.paused) {
                sound.play();
                button.classList.add('playing');
            } else {
                sound.pause();
                button.classList.remove('playing');
            }
        }

        function setVolume(volume) {
            var sounds = document.querySelectorAll('audio');
            sounds.forEach(function(sound) {
                sound.volume = volume;
            });
        }

        function loadSounds() {
            fetch('sounds/')
                .then(response => response.text())
                .then(data => {
                    var parser = new DOMParser();
                    var doc = parser.parseFromString(data, 'text/html');
                    var sounds = doc.querySelectorAll('a[href$=".mp3"]');
                    var soundboard = document.getElementById('soundboard');
                    sounds.forEach((sound, index) => {
                        var soundId = 'sound' + (index + 1);
                        var button = document.createElement('button');
                        button.className = 'button';
                        button.textContent = sound.href.split('/').pop();
                        button.setAttribute('onclick', `toggleSound('${soundId}', this)`);
                        soundboard.appendChild(button);

                        var audio = document.createElement('audio');
                        audio.id = soundId;
                        audio.src = sound.href;
                        soundboard.appendChild(audio);
                    });
                });
        }

        document.addEventListener('DOMContentLoaded', loadSounds);
    </script>
</head>
<body>
    <main>
        <h1>DM Soundboard</h1>
        <div id="soundboard"></div>
        <br>
        <label for="volume">Volume:</label>
        <input type="range" id="volume" name="volume" min="0" max="1" step="0.1" onchange="setVolume(this.value)">
    </main>
</body>
</html>